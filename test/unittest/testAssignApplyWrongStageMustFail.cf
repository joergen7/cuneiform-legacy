declare testAssignApplyWrongStageMustFail;

deftask my-task( x : a ) *{
    cat $a > $x
}*

a = ~'a';

x = apply(
    task : my-task
    a    : a
);

target x;