declare testWorkflow02;

deftask bowtie-align( sam : index read ) *{ bowtie -C --sam --threads 16 $index $read $sam }*
deftask samtools-view( bam : sam ) *{ samtools view -bS $sam > $bam }*
deftask samtools-sort( sorted : bam ) *{ samtools sort -m 2G $bam $sorted }*
deftask samtools-merge( merged : <sorted> ) *{ samtools merge -f $merged $sorted }*

chr22 = 'example_workflow/chr22';
caco = 'reads/caco.1.0001.fastq' 'reads/caco.1.0002.fastq';

sam = apply( task : bowtie-align index : chr22 read : caco );
bam = apply( task : samtools-view sam : sam );
sorted = apply( task : samtools-sort bam : bam );
merged = apply( task : samtools-merge sorted : sorted );

target merged;